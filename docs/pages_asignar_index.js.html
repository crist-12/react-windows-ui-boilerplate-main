<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>pages/asignar/index.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <h2><a href="index.html">Home</a></h2><h3>Namespaces</h3><ul><li><a href="Area.html">Area</a><ul class='methods'><li data-type='method'><a href="Area.html#~addNewArea">addNewArea</a></li><li data-type='method'><a href="Area.html#~getAreasData">getAreasData</a></li><li data-type='method'><a href="Area.html#~handleUpdateCity">handleUpdateCity</a></li><li data-type='method'><a href="Area.html#~searchTableAll">searchTableAll</a></li><li data-type='method'><a href="Area.html#~setAddModal">setAddModal</a></li><li data-type='method'><a href="Area.html#~setDefaultName">setDefaultName</a></li><li data-type='method'><a href="Area.html#~setListAreas">setListAreas</a></li><li data-type='method'><a href="Area.html#~setLoading">setLoading</a></li><li data-type='method'><a href="Area.html#~setSelectedIndex">setSelectedIndex</a></li><li data-type='method'><a href="Area.html#~setShowModal">setShowModal</a></li><li data-type='method'><a href="Area.html#~updateCityRow">updateCityRow</a></li></ul></li><li><a href="Asignaci%25C3%25B3n.html">Asignaci贸n</a><ul class='methods'><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~changeComputerStatus">changeComputerStatus</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~checkComputerStatus">checkComputerStatus</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~deleteAssignmentRow">deleteAssignmentRow</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~employee">employee</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~getAllComputersRegistered">getAllComputersRegistered</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~getAllComputersRegistered">getAllComputersRegistered</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~getAllEmployeeDetails">getAllEmployeeDetails</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~getComputerDetails">getComputerDetails</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~handleChangeEmployee">handleChangeEmployee</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~handleRemoveAssignment">handleRemoveAssignment</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~handleSaveAssignment">handleSaveAssignment</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~handleSaveMaintenance">handleSaveMaintenance</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~handleShowAsiModal">handleShowAsiModal</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~selectedComputadora">selectedComputadora</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~selectedDataPC">selectedDataPC</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setComputadoras">setComputadoras</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setControls">setControls</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setCurrentImage">setCurrentImage</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setDefaultValue">setDefaultValue</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setDetallesAsi">setDetallesAsi</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setDisableEmployee">setDisableEmployee</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setDummy">setDummy</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setEmployeeDatos">setEmployeeDatos</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setFilteredComputer">setFilteredComputer</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setFilteredEmployee">setFilteredEmployee</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setIncluyeCargador">setIncluyeCargador</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setIncluyeMochila">setIncluyeMochila</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setIncluyeMouse">setIncluyeMouse</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setIncluyeTeclado">setIncluyeTeclado</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setIncluyeWebcam">setIncluyeWebcam</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setLoading">setLoading</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setMantenimientoTipo">setMantenimientoTipo</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setModalAsi">setModalAsi</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setModalCancel">setModalCancel</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setModalImg">setModalImg</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setModalMante">setModalMante</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setObservacionesMantenimiento">setObservacionesMantenimiento</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setSelectedEmployee">setSelectedEmployee</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setSelectEm">setSelectEm</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setSelectEq">setSelectEq</a></li><li data-type='method'><a href="Asignaci%2525C3%2525B3n.html#~setStatusComputadora">setStatusComputadora</a></li></ul></li><li><a href="Bit%25C3%25A1cora.html">Bit谩cora</a><ul class='methods'><li data-type='method'><a href="Bit%2525C3%2525A1cora.html#~getBitacoraRecords">getBitacoraRecords</a></li><li data-type='method'><a href="Bit%2525C3%2525A1cora.html#~searchTableAll">searchTableAll</a></li><li data-type='method'><a href="Bit%2525C3%2525A1cora.html#~setLogs">setLogs</a></li></ul></li><li><a href="Campos.html">Campos</a><ul class='methods'><li data-type='method'><a href="Campos.html#~addItemCampo">addItemCampo</a></li><li data-type='method'><a href="Campos.html#~changeLevelCampo">changeLevelCampo</a></li><li data-type='method'><a href="Campos.html#~cleanFields">cleanFields</a></li><li data-type='method'><a href="Campos.html#~deleteCampo">deleteCampo</a></li><li data-type='method'><a href="Campos.html#~getAllTypes">getAllTypes</a></li><li data-type='method'><a href="Campos.html#~handleSaveAllCampos">handleSaveAllCampos</a></li><li data-type='method'><a href="Campos.html#~handleSaveEntity">handleSaveEntity</a></li><li data-type='method'><a href="Campos.html#~handleToggleSwitch">handleToggleSwitch</a></li><li data-type='method'><a href="Campos.html#~handleToggleVisible">handleToggleVisible</a></li><li data-type='method'><a href="Campos.html#~onChangeHandler">onChangeHandler</a></li><li data-type='method'><a href="Campos.html#~onChangeHandler">onChangeHandler</a></li><li data-type='method'><a href="Campos.html#~saveAllFields">saveAllFields</a></li><li data-type='method'><a href="Campos.html#~setAllCampos">setAllCampos</a></li><li data-type='method'><a href="Campos.html#~setCampos">setCampos</a></li><li data-type='method'><a href="Campos.html#~setCategorias">setCategorias</a></li><li data-type='method'><a href="Campos.html#~setDialog">setDialog</a></li><li data-type='method'><a href="Campos.html#~setEntityName">setEntityName</a></li><li data-type='method'><a href="Campos.html#~setFlag">setFlag</a></li><li data-type='method'><a href="Campos.html#~setIndexModal">setIndexModal</a></li><li data-type='method'><a href="Campos.html#~setItemModal">setItemModal</a></li><li data-type='method'><a href="Campos.html#~setLoading">setLoading</a></li><li data-type='method'><a href="Campos.html#~setPropsCampos">setPropsCampos</a></li><li data-type='method'><a href="Campos.html#~setSelectedCategory">setSelectedCategory</a></li><li data-type='method'><a href="Campos.html#~setTypes">setTypes</a></li><li data-type='method'><a href="Campos.html#~showPrevisualization">showPrevisualization</a></li><li data-type='method'><a href="Campos.html#~validateAllFieldsHasName">validateAllFieldsHasName</a></li></ul></li><li><a href="Categor%25C3%25ADas.html">Categor铆as</a><ul class='methods'><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setCategoria">setCategoria</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setInfoRaw">setInfoRaw</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setInsertedId">setInsertedId</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setIsRequired">setIsRequired</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setItemModal">setItemModal</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setItems">setItems</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setItemsSelect">setItemsSelect</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setKeyEdit">setKeyEdit</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setLastLevel">setLastLevel</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setlistCat">setlistCat</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setLoading">setLoading</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setModalActualizar">setModalActualizar</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setModalCancel">setModalCancel</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setModalCategory">setModalCategory</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setModalNew">setModalNew</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setNewItems">setNewItems</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setNombreCaracteristica">setNombreCaracteristica</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setPlaceholderR">setPlaceholderR</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setSelectedType">setSelectedType</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setSelectValues">setSelectValues</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setShowModal">setShowModal</a></li><li data-type='method'><a href="Categor%2525C3%2525ADas.html#~setTypes">setTypes</a></li></ul></li></ul><h3>Global</h3><ul><li><a href="global.html#useInput">useInput</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">pages/asignar/index.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * @file Componente - Asignaci贸n
 * @author Christopher Ortiz
 * @namespace Asignaci贸n
 * @description Los equipos deben ser asignados a los empleados, esta pantalla es la encargada de realizar las asignaciones a cada uno de ellos.
 * @version 1.0.0
 */
import { NavPageContainer, Link, InputText, NavPageContainerRight, LinkCompound, Button, RadioButton } from 'react-windows-ui'
import React, { useEffect } from 'react'
import NavigationWindow from '../../components/Navigation'
import RightMenu from '../../components/RightMenu'
import Select from 'react-select';
import { useMasterState } from '../../stores/MasterStore'
import { useAuthState } from '../../stores/AuthStore';
import useState from 'react-usestateref'
import Modal from '../../components/Modal';
import '@trendmicro/react-modal/dist/react-modal.css';
import { triggerBase64Download } from 'react-base64-downloader'

const Asignar = () => {

/**
 * useMasterState Manejador de estado del color del sistema
 * @function useMasterState
 * @memberof MasterState
 * @return masterState {Object}
 * @inner
 */
  const masterState = useMasterState();
/**
 * setShowModal Manejador de estados de las credenciales del usuario
 * @function useAuthState
 * @memberof AuthState
 * @return authState {Object}
 * @inner
 */
  const authState = useAuthState();
  const dValue = {
    value: 0,
    label: ""
  }

/**
 * setControls Hook encargado de traer los controles o los campos de cada entidad
 * @function setControls
 * @memberof Asignaci贸n
 * @return controls {Array}
 * @inner
 */
  const [controls, setControls] = React.useState([]);
/**
 * setLoading Hook encargado de controlar el estado de carga de los controles o los campos de cada entidad
 * @function setLoading
 * @memberof Asignaci贸n
 * @return loading {boolean}
 * @inner
 */
  const [loading, setLoading] = React.useState(true)
/**
 * setComputadoras Hook encargado de traer las computadoras registradas en la base de datos
 * @function setComputadoras
 * @memberof Asignaci贸n
 * @return computadoras {Array}
 * @inner
 */
  const [computadoras, setComputadoras] = React.useState([]);
/**
 * setEmployeeDatos Hook encargado de traer los datos de los empleados en la base de datos
 * @function setEmployeeDatos
 * @memberof Asignaci贸n
 * @return employeeDatos {Array}
 * @inner
 */
  const [employeeDatos, setEmployeeDatos] = React.useState([])
/**
 * setEmployee Hook encargado de almacenar los datos del empleado seleccionado en el select
 * @function employee
 * @memberof Asignaci贸n
 * @return employee {Object}
 * @inner
 */
  const [employee, setEmployee] = React.useState(null);
/**
 * setSelectedComputadora Hook encargado de almacenar los datos de la computadora seleccionada en el select
 * @function selectedComputadora
 * @memberof Asignaci贸n
 * @return selectedComputadora {Object}
 * @inner
 */
  const [selectedComputadora, setSelectedComputadora, selectedComputadoraRef] = useState(null);
/**
 * setSelectedDataPC Hook encargado de almacenar los datos de la computadora seleccionada en el select
 * @function selectedDataPC
 * @memberof Asignaci贸n
 * @return selectedDataPC {Object}
 * @inner
 */
  const [selectedDataPC, setSelectedDataPC, selectedDataPCRef] = useState(null);
/**
 * setStatusComputadora Hook encargado de conocer el estado de la computadora (Sin asignar, asignada, en mantenimiento, no disponible)
 * @function setStatusComputadora
 * @memberof Asignaci贸n
 * @return statusComputadora {Array}
 * @inner
 */
  const [statusComputadora, setStatusComputadora, statusComputadoraRef] = useState(null);
/**
 * setSelectedEmployee Hook encargado de almacenar los datos del empleado seleccionado en el select
 * @function setSelectedEmployee
 * @memberof Asignaci贸n
 * @return selectedEmployee {Array}
 * @inner
 */
  const [selectedEmployee, setSelectedEmployee, selectedEmployeeRef] = useState(null);
/**
 * setFilteredComputer Hook encargado de almacenar los datos de la computadora filtrada en el select
 * @function setFilteredComputer
 * @memberof Asignaci贸n
 * @return filteredComputer {Array}
 * @inner
 */
  const [filteredComputer, setFilteredComputer, filteredComputerRef] = useState(null);
/**
 * setFilteredEmployee Hook encargado de traer los datos del empleado filtrado en el selected
 * @function setFilteredEmployee
 * @memberof Asignaci贸n
 * @return filteredEmployee {Object}
 * @inner
 */
  const [filteredEmployee, setFilteredEmployee, filteredEmployeeRef] = useState(null);
/**
 * setDisableEmployee Hook que maneja si los botones de asignar est谩n deshabilitados
 * @function setDisableEmployee
 * @memberof Asignaci贸n
 * @return disableEmployee {boolean}
 * @inner
 */
  const [disableEmployee, setDisableEmployee, disableEmployeeRef] = useState(true);
/**
 * setModalAsi Hook encargado de manejar el estado de la ventana modal de asignaci贸n
 * @function setModalAsi
 * @memberof Asignaci贸n
 * @return modalAsi {boolean}
 * @inner
 */
  const [modalAsi, setModalAsi] = React.useState(false);
/**
 * setModalAsi Hook encargado de manejar el estado de la ventana modal de mantenimiento
 * @function setModalMante
 * @memberof Asignaci贸n
 * @return modalMante {boolean}
 * @inner
 */
  const [modalMante, setModalMante] = React.useState(false);
/**
 * setModalCancel Hook encargado de manejar el estado de la ventana modal de cambio de estado
 * @function setModalCancel
 * @memberof Asignaci贸n
 * @return modalCancel {boolean}
 * @inner
 */
  const [modalCancel, setModalCancel] = React.useState(false);
/**
 * setMantenimientoTipo Hook encargado de manejar el tipo de mantenimiento que ha seleccionado el usuario
 * @function setMantenimientoTipo
 * @memberof Asignaci贸n
 * @return mantenimientoTipo {Object}
 * @inner
 */
  const [mantenimientoTipo, setMantenimientoTipo, mantenimientoTipoRef] = useState(null);
/**
 * setObservacionesMantenimiento Hook encargado de manejar las observaciones del mantenimiento
 * @function setObservacionesMantenimiento
 * @memberof Asignaci贸n
 * @return observacionesMantenimiento {string}
 * @inner
 */
  const [observacionesMantenimiento, setObservacionesMantenimiento, observacionesMantenimientoRef] = useState(null);
/**
 * setModalImg Hook encargado de manejar el modal de Imagen
 * @function setModalImg
 * @memberof Asignaci贸n
 * @return modalImg {boolean}
 * @inner
 */
  const [modalImg, setModalImg] = useState(false);
/**
 * setCurrentImage Hook encargado de setear la imagen que se va a mostrar en el modal
 * @function setCurrentImage
 * @memberof Asignaci贸n
 * @return currentImage {boolean}
 * @inner
 */
  const [currentImage, setCurrentImage, currentImageRef] = useState(null);
/**
 * setDetallesAsi Hook encargado de manejar los detalles de la asignaci贸n
 * @function setDetallesAsi
 * @memberof Asignaci贸n
 * @return detallesAsi {string}
 * @inner
 */
  const [detallesAsi, setDetallesAsi, detallesAsiRef] = useState("");
/**
 * setIncluyeMochila Hook encargado de manejar si durante la asignaci贸n se le dar谩 mochila
 * @function setIncluyeMochila
 * @memberof Asignaci贸n
 * @return incluyeMochila {boolean}
 * @inner
 */
  const [incluyeMochila, setIncluyeMochila, incluyeMochilaRef] = useState(false);
/**
 * setIncluyeMouse Hook encargado de manejar si durante la asignaci贸n se le dar谩 mouse
 * @function setIncluyeMouse
 * @memberof Asignaci贸n
 * @return incluyeMouse {boolean}
 * @inner
 */
  const [incluyeMouse, setIncluyeMouse, incluyeMouseRef] = useState(false);
/**
 * setIncluyeTeclado Hook encargado de manejar si durante la asignaci贸n se le dar谩 teclado
 * @function setIncluyeTeclado
 * @memberof Asignaci贸n
 * @return incluyeTeclado {boolean}
 * @inner
 */
  const [incluyeTeclado, setIncluyeTeclado, incluyeTecladoRef] = useState(false);
/**
 * setIncluyeCargador Hook encargado de manejar si durante la asignaci贸n se le dar谩 cargador
 * @function setIncluyeCargador
 * @memberof Asignaci贸n
 * @return incluyeCargador {boolean}
 * @inner
 */
  const [incluyeCargador, setIncluyeCargador, incluyeCargadorRef] = useState(false);
/**
 * setIncluyeWebcam Hook encargado de manejar si durante la asignaci贸n se le dar谩 webcam
 * @function setIncluyeWebcam
 * @memberof Asignaci贸n
 * @return incluyeWebcam {boolean}
 * @inner
 */
  const [incluyeWebcam, setIncluyeWebcam, incluyeWebcamRef] = useState(false);
/**
 * setDefaultValue Hook encargado de asignar un valor para limpiar los selects luego de una operaci贸n de actualizaci贸n o registro
 * @function setDefaultValue
 * @memberof Asignaci贸n
 * @return defaultValue {Object}
 * @inner
 */
  const [defaultValue, setDefaultValue, defaultValueRef] = useState(dValue);
/**
 * setSelectEq Hook encargado limpiar los inputs luego de una operaci贸n de actualizaci贸n o registro
 * @function setSelectEq
 * @memberof Asignaci贸n
 * @return selectEq {Object}
 * @inner
 */
  const [selectEq, setSelectEq, selectEqRef] = useState(null);
/**
 * setSelectEm Hook encargado limpiar los inputs luego de una operaci贸n de actualizaci贸n o registro
 * @function setSelectEm
 * @memberof Asignaci贸n
 * @return selectEm {Object}
 * @inner
 */
  const [selectEm, setSelectEm, selectEmRef] = useState(null);
/**
 * setDummy Hook encargado de renderizar un componente para actualizar sus datos
 * @function setDummy
 * @memberof Asignaci贸n
 * @return dummy {boolean}
 * @inner
 */
  const [dummy, setDummy] = React.useState(false);

  useEffect(() => {
    getAllComputersRegistered()
    getAllEmployeeDetails()
  }, [dummy])

  const getControls = async () => {
    try {
      const response = await fetch(process.env.REACT_APP_HOME +"control", {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json'
        }
      })

      const result = await response.json()
      var arre = []
      result.forEach(ele => {
        var obj = {
          label: ele.CaracteristicaDescripcion,
          type: ele.DescripcionTipo,
          placeholder: "Ingrese " + ele.CaracteristicaDescripcion,
          tooltip: ele.CaracteristicaDescripcion
        }
        arre.push(obj)
      })
      console.log(arre)
      setControls(arre)
      setLoading(false)

      console.log(controls)

    } catch (error) {
      console.log(error)
    }
  }
/**
 * getAllComputersRegistered Funci贸n encargada de obtener todos los equipos registrados
 * @function getAllComputersRegistered
 * @memberof Asignaci贸n
 * @async
 * @return void
 * @inner
 */
  const getAllComputersRegistered = async () => {
    try {
      const response = await fetch(process.env.REACT_APP_HOME + "control/equipos", {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json'
        }
      })
      const result = await response.json()
      var arrayComputadoras = []
      result.forEach(ele => {
        var objComputadora = {
          label: "",
          value: ""
        }
        objComputadora.value = ele.IdEquipo;
        switch (ele.DescripcionEstado) {
          case "Asignada":
            objComputadora.label = ele.Equipo + " ";
            break;
          case "En mantenimiento":
            objComputadora.label = ele.Equipo + " ";
            break;
          case "No disponible":
            objComputadora.label = ele.Equipo + " ";
            break;
          case "Sin asignar":
            objComputadora.label = ele.Equipo + " ";
            break;
        }
        arrayComputadoras.push(objComputadora)
      })
    } catch (error) {
      console.log(error)
    }
    setComputadoras(arrayComputadoras)
    // setLoading(false)
  }
/**
 * handleChangeComputadora Funci贸n encargada de gestionar el cambio del select de las computadoras
 * @function getAllComputersRegistered
 * @memberof Asignaci贸n
 * @async
 * @return void
 * @inner
 */
  const handleChangeComputadora = async (e) => {
    //var auxArray = [];
    //auxArray = computadoras.filter(ele => ele.value == e.value)
    setSelectedComputadora(e.value)
    setSelectEq(e)
    console.log(e)
    var label = e.label
    var label2 = label.substring(0, label.length - 1);
    setSelectedDataPC(label.slice(0, -2))
    await getComputerDetails(e.value)
    await checkComputerStatus()

  }
/**
 * handleChangeEmployee Funci贸n encargada de gestionar el cambio del select de los empleados
 * @function handleChangeEmployee
 * @memberof Asignaci贸n
 * @async
 * @return void
 * @inner
 */
  const handleChangeEmployee = async (e) => {
    var label = e.label
    setSelectEm(e)
    setFilteredEmployee(label)
    setSelectedEmployee(e.value)
  }
/**
 * getAllEmployeeDetails Funci贸n encargada de traer datos espc铆ficos de los empleados
 * @function getAllEmployeeDetails
 * @memberof Asignaci贸n
 * @async
 * @return void
 * @inner
 */
  const getAllEmployeeDetails = async () => {
    try {
      const response = await fetch(process.env.REACT_APP_HOME + "employee/details", {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json'
        }
      })
      const result = await response.json()
      var arrayEmpleados = []
      var arraySelect = []
      result.forEach(ele => {
        var objEmpleados = {
          label: ele.NombreEmpleado,
          value: ele.IdEmpleado,
          area: ele.DescripcionArea,
          sucursal: ele.NombreSucursal,
          ciudad: ele.NombreCiudad
        }
        //  objEmpleados.value = ele.IdEquipo;
        var obj = {
          label: ele.NombreEmpleado,
          value: ele.IdEmpleado
        }
        arrayEmpleados.push(objEmpleados)
        arraySelect.push(obj)
      })
    } catch (error) {
      console.log(error)
    }
    setEmployeeDatos(arraySelect)
    setEmployee(arrayEmpleados)
    setLoading(false)
  }
/**
 * getComputerDetails Funci贸n encargada de traer los datos de las computadoras
 * @function getComputerDetails
 * @memberof Asignaci贸n
 * @async
 * @return void
 * @inner
 */
  const getComputerDetails = async () => {
    try {
      const response = await fetch(process.env.REACT_APP_HOME + "machines/" + selectedComputadoraRef.current, {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json'
        }
      })
      const result = await response.json()
      setFilteredComputer(result);
      console.log(result)
    } catch (error) {
      alert(error)
    }
  }
/**
 * checkComputerStatus Funci贸n encargada de consultar el estado actual de la computadora
 * @function checkComputerStatus
 * @memberof Asignaci贸n
 * @async
 * @return void
 * @inner
 */
  const checkComputerStatus = async () => {
    try {
      const response = await fetch(process.env.REACT_APP_HOME + "assignment/status/" + selectedComputadoraRef.current, {
        method: 'GET',
        headers: {
          'Content-Type': 'application/json'
        }
      })
      const result = await response.json()
      console.warn(result)
      setStatusComputadora(result[0]);
      if (result[0].TipoEstado == 1) {
        setDisableEmployee(false)
      } else {
        setDisableEmployee(true)
      }
      //console.log(result)
    } catch (error) {
      alert(error)
    }
  }
/**
 * changeComputerStatus Funci贸n encargada de cambiar el estado de la computadora
 * @function changeComputerStatus
 * @memberof Asignaci贸n
 * @async
 * @param {int} status
 * @return void
 * @inner
 */
  const changeComputerStatus = async (status) => {
    try {
      const response = await fetch(process.env.REACT_APP_HOME + "machines/status/" + selectedComputadoraRef.current, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          TipoEstado: status
        })
      })
      const result = await response.json()
      console.log(result)
      setSelectEm(dValue);
      setSelectEq(dValue);
      setFilteredComputer(null)
      if (status == 1 || status == 4)
        alert("Cambio de estado exitoso")
      if (status == 4 || status == 2) {
        getAllComputersRegistered()
        getAllEmployeeDetails()
      }
      //window.location.reload()
      setDummy(!dummy)
      setDefaultValue(dValue);
    } catch (error) {
      alert(error)
    }
  }
/**
 * handleSaveAssignment Funci贸n encargada de gestionar el proceso de guardar una asignaci贸n
 * @function handleSaveAssignment
 * @memberof Asignaci贸n
 * @async
 * @return void
 * @inner
 */
  const handleSaveAssignment = async () => {
    try {
      const response = await fetch(process.env.REACT_APP_HOME + "assignment", {
        method: 'POST',
        headers: {
          'Content-Type': 'application/json'
        },
        body: JSON.stringify({
          IdEmpleado: selectedEmployee,
          IdEquipo: selectedComputadoraRef.current,
          DetalleAsignacion: detallesAsi,
          IncluyeMochila: incluyeMochila,
          IncluyeMouse: incluyeMouse,
          IncluyeCargador: incluyeCargador,
          IncluyeTeclado: incluyeTeclado,
          IncluyeWebCam: incluyeWebcam,
          UsuarioAsigna: authState.me.get().username
        })
      })
      const result = await response.json()
      console.log(result)
      changeComputerStatus(2)
      getAllComputersRegistered()
      setSelectEm(dValue);
      setSelectEq(dValue);
      setFilteredComputer(null)
      alert("Asignaci贸n exitosa")
      setModalAsi(false)
      setDetallesAsi("")
      setIncluyeCargador(false)
      setIncluyeMochila(false)
      setIncluyeMouse(false)
      setIncluyeTeclado(false)
      setIncluyeWebcam(false)

    } catch (error) {
      alert(error)
    }
  }
/**
 * handleShowAsiModal Funci贸n encargada de gestionar el proceso de mostrar el modal de asignaci贸n
 * @function handleShowAsiModal
 * @memberof Asignaci贸n
 * @async
 * @return void
 * @inner
 */
  const handleShowAsiModal = () => {
    if (filteredEmployeeRef.current) {
      setModalAsi(true)
    } else {
      return alert("Debes seleccionar un empleado para asignar el equipo")
    }
  }
/**
 * handleRemoveAssignment Funci贸n encargada de gestionar el proceso de remover una asignaci贸n
 * @function handleRemoveAssignment
 * @memberof Asignaci贸n
 * @async
 * @return void
 * @inner
 */
  const handleRemoveAssignment = async () => {
    try {
      await changeComputerStatus(1)
      const response = await fetch(process.env.REACT_APP_HOME + "assignment/remove/" + selectedComputadoraRef.current, {
        method: 'PUT',
        headers: {
          'Content-Type': 'application/json'
        }
      })
      const result = await response.json()
      console.log(result)
      //alert("Desasignaci贸n exitosa")
      //changeComputerStatus(1)
      await deleteAssignmentRow()
      getAllComputersRegistered()
      // setModalDes(false)

    } catch (error) {
      alert(error)
    }
    setDummy(!dummy)
    setDefaultValue(dValue)
    //window.location.reload()
  }
/**
 * handleSaveMaintenance Funci贸n encargada de guardar los detalles de un mantenimiento
 * @function handleSaveMaintenance
 * @memberof Asignaci贸n
 * @async
 * @return void
 * @inner
 */
  const handleSaveMaintenance = async () => {
    if (observacionesMantenimientoRef.current) {
      if (mantenimientoTipoRef.current) {
        try {
          const response = await fetch(process.env.REACT_APP_HOME + "maintenance", {
            method: 'POST',
            headers: {
              'Content-Type': 'application/json'
            },
            body: JSON.stringify({
              IdEquipo: selectedComputadoraRef.current,
              ObservacionesMantenimiento: observacionesMantenimiento,
              IdTipoMantenimiento: mantenimientoTipoRef.current
            })
          })
          const result = await response.json()
          console.log(result)
          changeComputerStatus(3)
          setSelectEm(dValue);
          setSelectEq(dValue);
          getAllComputersRegistered()
          alert("Mantenimiento registrados exitosamente")
          setModalMante(false)
          setStatusComputadora(3);
          setMantenimientoTipo(null)
          setObservacionesMantenimiento("")
          setDummy(!dummy)
          setDefaultValue(dValue)
          //window.location.reload()
        } catch (error) {
          alert(error)
        }
      } else {
        alert("Debes escoger el tipo de mantenimiento")
      }
    } else {
      alert("Debes escribir la raz贸n del mantenimiento")
    }
  }
/**
 * deleteAssignmentRow Funci贸n encargada de gestionar el proceso de eliminar una asignaci贸n
 * @function deleteAssignmentRow
 * @memberof Asignaci贸n
 * @async
 * @return void
 * @inner
 */
  const deleteAssignmentRow = async () => {
    try {
      const response = await fetch(process.env.REACT_APP_HOME + "assignment/" + selectedComputadoraRef.current, {
        method: 'DELETE',
        headers: {
          'Content-Type': 'application/json'
        }
      })
      const result = await response.json()
      console.log(result)
      // alert("Asignaci贸n eliminada exitosamente")
      //getAllComputersRegistered()
    } catch (error) {
      alert(error)
    }
  }


  return (
    &lt;>
      {
        loading ? &lt;>&lt;/> :
          &lt;>
            &lt;NavigationWindow />
            &lt;Modal showOverlay={true} show={modalAsi} onClose={() => setModalAsi(false)} size="lg">
              &lt;Modal.Header>
                &lt;Modal.Title>Asignaci贸n de Computadora&lt;/Modal.Title>
              &lt;/Modal.Header>
              &lt;Modal.Body>
                &lt;div style={{ display: 'flex' }}>
                  {/* &lt;i className="icons10-info" style={{ color: '#faca2a', fontSize: "50px" }} /> */}
                  &lt;div style={{ marginRight: 25, flex: 1 }}>
                    &lt;p>Datos Generales de Asignaci贸n&lt;/p>
                    &lt;div className='app-hr' />
                    &lt;p>COMPUTADORA: {selectedDataPCRef.current} &lt;/p>
                    &lt;p>EMPLEADO: {filteredEmployeeRef.current}&lt;/p>
                    &lt;p>FECHA DE ASIGNACIN: {new Date().toLocaleDateString()}&lt;/p>
                    &lt;p>ASIGNADO POR: {authState.me.get().username}&lt;/p>
                  &lt;/div>
                  &lt;div style={{ flex: 1, justifyContent: "center", display: "flex", flexDirection: "column" }}>
                    &lt;div style={{ margin: "10px 0px", justifyContent: "center" }}>
                      &lt;label className='app-checkbox'>
                        &lt;input type="checkbox" style={{ marginRight: "10px" }} checked={incluyeMochila} onChange={(e) => setIncluyeMochila(e.target.checked)} />
                        Incluye Mochila
                      &lt;/label>
                    &lt;/div>
                    &lt;div style={{ margin: "10px 0px" }}>
                      &lt;label className='app-checkbox'>
                        &lt;input type="checkbox" style={{ marginRight: "10px" }} checked={incluyeCargador} onChange={(e) => setIncluyeCargador(e.target.checked)} />
                        Incluye Cargador
                      &lt;/label>
                    &lt;/div>
                    &lt;div style={{ margin: "10px 0px" }}>
                      &lt;label className='app-checkbox'>
                        &lt;input type="checkbox" style={{ marginRight: "10px" }} checked={incluyeMouse} onChange={(e) => setIncluyeMouse(e.target.checked)} />
                        Incluye Mouse
                      &lt;/label>
                    &lt;/div>
                    &lt;div style={{ margin: "10px 0px" }}>
                      &lt;label className='app-checkbox'>
                        &lt;input type="checkbox" style={{ marginRight: "10px" }} checked={incluyeTeclado} onChange={(e) => setIncluyeTeclado(e.target.checked)} />
                        Incluye Teclado Num茅rico
                      &lt;/label>
                    &lt;/div>
                    &lt;div style={{ margin: "10px 0px" }}>
                      &lt;label className='app-checkbox'>
                        &lt;input type="checkbox" style={{ marginRight: "10px" }} checked={incluyeWebcam} onChange={(e) => setIncluyeWebcam(e.target.checked)} />
                        Incluye WebCam
                      &lt;/label>
                    &lt;/div>

                  &lt;/div>

                &lt;/div>
                &lt;div style={{ display: "flex" }}>
                  &lt;div style={{ flex: 1, width: "100%" }}>
                    &lt;p>Detalles de la asignacion&lt;/p>
                    &lt;div className='app-hr' />
                    &lt;textarea className="app-textarea" style={{ width: "100%", resize: "none" }} onChange={(e) => setDetallesAsi(e.target.value)} />
                  &lt;/div>
                &lt;/div>
              &lt;/Modal.Body>
              &lt;Modal.Footer>
                &lt;button id="btn-asi" className='app-button animate primary' style={{ marginRight: "10px" }} onClick={handleSaveAssignment}>Asignar&lt;/button>
                &lt;button id="btn-cnl" className='app-button animate primary' style={{ marginRight: "10px" }} onClick={() => setModalAsi(false)}>Cancelar&lt;/button>
              &lt;/Modal.Footer>
            &lt;/Modal>
            &lt;Modal showOverlay={true} show={modalMante} onClose={() => setModalMante(false)} size="lg">
              &lt;Modal.Header>
                &lt;Modal.Title>Enviar a mantenimiento&lt;/Modal.Title>
              &lt;/Modal.Header>
              &lt;Modal.Body>
                &lt;div style={{ display: 'flex' }}>
                  {/* &lt;i className="icons10-info" style={{ color: '#faca2a', fontSize: "50px" }} /> */}
                  &lt;div style={{ marginRight: 25, flex: 1 }}>
                    &lt;p>Datos del Mantenimiento&lt;/p>
                    &lt;div className='app-hr' />
                    &lt;p>COMPUTADORA: {selectedDataPCRef.current} &lt;/p>
                    &lt;p>FECHA DE ENVIO A MANTENIMIENTO: {new Date().toLocaleDateString()}&lt;/p>
                  &lt;/div>
                &lt;/div>
                &lt;div style={{ display: "flex" }}>
                  &lt;div style={{ flex: 1 }}>
                    &lt;div>
                      &lt;p>TIPO DE MANTENIMIENTO&lt;/p>
                      &lt;div className='app-hr' />
                    &lt;/div>
                    &lt;div style={{ flex: 1, flexDirection: "row", display: "flex", margin: "10px 0px" }}>
                      &lt;div style={{ marginRight: "15px" }}>
                        &lt;RadioButton name='mantenimiento' value={1} label='Preventivo' onChange={(e) => setMantenimientoTipo(1)} />
                      &lt;/div>
                      &lt;div style={{ marginRight: "15px" }}>
                        &lt;RadioButton name='mantenimiento' value={2} label='Correctivo' onChange={(e) => setMantenimientoTipo(2)} />
                      &lt;/div>
                      &lt;div style={{ marginRight: "15px" }}>
                        &lt;RadioButton name='mantenimiento' value={3} label='Predictivo' onChange={(e) => setMantenimientoTipo(3)} />
                      &lt;/div>
                    &lt;/div>
                  &lt;/div>
                &lt;/div>
                &lt;div style={{ display: "flex" }}>
                  &lt;div style={{ flex: 1, width: "100%" }}>
                    &lt;p>Escriba las razones del mantenimiento&lt;/p>
                    &lt;div className='app-hr' />
                    &lt;textarea className="app-textarea" style={{ width: "100%", resize: "none" }} value={observacionesMantenimiento} onChange={(e) => setObservacionesMantenimiento(e.target.value)} placeholder="Detalles del mantenimiento" />
                  &lt;/div>
                &lt;/div>
              &lt;/Modal.Body>
              &lt;Modal.Footer>
                &lt;button className='app-button animate primary' style={{ marginRight: "10px" }} onClick={handleSaveMaintenance}>Enviar a mantenimiento&lt;/button>
                &lt;button className='app-button animate primary' style={{ marginRight: "10px" }} onClick={() => setModalMante(false)}>Cancelar&lt;/button>
              &lt;/Modal.Footer>
            &lt;/Modal>

            &lt;Modal showOverlay={true} show={modalCancel}>
              &lt;Modal.Header>
                &lt;Modal.Title>Dar de baja&lt;/Modal.Title>
              &lt;/Modal.Header>
              &lt;Modal.Body>
                &lt;div style={{ display: 'flex' }}>
                  &lt;i className="icons10-exclamation-mark" style={{ color: '#faca2a', fontSize: "70px" }} />
                  &lt;div style={{ marginLeft: 25, justifyContent: "center", alignItems: "center", display: "flex" }}>
                    &lt;label>Est谩s a punto de dar de baja esta computadora, 驴est谩s seguro(a) que deseas continuar?&lt;/label>
                  &lt;/div>
                &lt;/div>
              &lt;/Modal.Body>
              &lt;Modal.Footer>
                &lt;Button value='Si, quiero dar de baja' onClick={() => { changeComputerStatus(4); setModalCancel(false) }} />
                &lt;Button value="No, mantener estado actual" onClick={() => setModalCancel(false)} />
              &lt;/Modal.Footer>
            &lt;/Modal>
            &lt;NavPageContainer
              hasPadding={true}
              animateTransition={true}>

              &lt;h1>Asignar&lt;/h1>
              &lt;p>Asigna equipos a colaboradores.&lt;/p>
              &lt;div className="app-hr">&lt;/div>
              &lt;div style={{ display: "flex", width: "100%", marginRight: "30px" }}>
                &lt;div style={{ display: "flex", width: "60%", flexDirection: "column" }}>
                  &lt;div style={{ marginTop: "30px" }}>
                    &lt;label>Seleccione el equipo: &lt;/label>
                    &lt;div style={{ width: "450px", marginTop: "10px" }}>
                      &lt;Select
                        options={computadoras}
                        onChange={handleChangeComputadora}
                        defaultValue={defaultValueRef.current}
                        value={selectEqRef.current}
                        theme={(theme) => ({
                          ...theme,
                          borderRadius: 0,
                          colors: {
                            ...theme.colors,
                            primary: masterState.get().color,
                            primary25: masterState.get().color
                          },
                        })}
                        inputId="select-equipos"
                      />
                    &lt;/div>
                  &lt;/div>

                  &lt;div style={{ marginTop: "30px" }}>
                    &lt;label>Seleccione el empleado: &lt;/label>
                    &lt;div style={{ width: "450px", marginTop: "10px" }}>
                      &lt;Select
                        inputId="select-empleados"
                        options={employeeDatos}
                        isDisabled={disableEmployeeRef.current}
                        onChange={handleChangeEmployee}
                        value={selectEmRef.current}
                        theme={(theme) => ({
                          ...theme,
                          borderRadius: 0,
                          colors: {
                            ...theme.colors,
                            primary: masterState.get().color,
                            primary25: masterState.get().color
                          },
                        })}
                      />
                    &lt;/div>
                  &lt;/div>
                  &lt;div style={{ marginTop: "20px" }}>
                    &lt;button className='app-button animate primary' id="asi-asi" style={{ marginRight: "10px" }} disabled={disableEmployeeRef.current} onClick={handleShowAsiModal}>Asignar&lt;/button>
                    &lt;button className='app-button animate primary' id="asi-rem" style={{ marginRight: "10px" }} disabled={statusComputadoraRef.current?.TipoEstado != 2 ? true : false} onClick={handleRemoveAssignment}>Remover asignaci贸n&lt;/button>
                    &lt;button className='app-button animate primary' id="asi-mnt" style={{ marginRight: "10px" }} disabled={statusComputadoraRef.current?.TipoEstado == 3 ? true : false} onClick={() => setModalMante(true)}>Enviar a mantenimiento&lt;/button>
                    &lt;button className='app-button animate primary' id="asi-baj" style={{ marginRight: "10px" }} disabled={statusComputadoraRef.current?.TipoEstado != 1 ? true : false} onClick={() => setModalCancel(true)}>Dar de baja&lt;/button>
                  &lt;/div>

                  &lt;div style={{ backgroundColor: "#eee", marginTop: "30px", padding: "10px" }}>
                    {
                      !selectedComputadora ?
                        &lt;>
                          &lt;p>Seleccione una computadora o un empleado para ver informaci贸n&lt;/p>
                        &lt;/> : &lt;>
                          {
                            filteredComputerRef.current ?
                              &lt;>
                                {
                                  filteredComputerRef.current.map(ele => {
                                    if (ele.CaracteristicaTipo == 3) {
                                      return (&lt;>
                                        {
                                          ele.Respuesta.length > 1000 ?
                                            &lt;p>&lt;span style={{ fontWeight: "bold" }}>{ele.CaracteristicaDescripcion}&lt;/span>: &lt;a style={{ textDecoration: "underline", color: "blue" }} onClick={() => { setModalImg(true); setCurrentImage(ele.Respuesta) }}>Ver imagen&lt;/a>&lt;/p>
                                            : &lt;p>&lt;span style={{ fontWeight: "bold" }}>{ele.CaracteristicaDescripcion}&lt;/span>: ---&lt;/p>
                                        }
                                        &lt;Modal showOverlay={true} id="mdl-img" show={modalImg} onClose={() => setModalImg(false)}>
                                          &lt;Modal.Header>
                                            &lt;Modal.Title>Visualizador de im谩genes&lt;/Modal.Title>
                                          &lt;/Modal.Header>
                                          &lt;Modal.Body>
                                            &lt;img src={currentImageRef.current} width="700px" height="auto" />
                                          &lt;/Modal.Body>
                                          &lt;Modal.Footer>
                                            &lt;Button value='Guardar imagen' onClick={() => { triggerBase64Download(currentImageRef.current, "IMG-" + Date.now()) }} />
                                            &lt;Button value="Cerrar" onClick={() => setModalImg(false)} />
                                          &lt;/Modal.Footer>
                                        &lt;/Modal>
                                      &lt;/>)
                                    }
                                    return (
                                      &lt;>
                                        &lt;p>&lt;span style={{ fontWeight: "bold" }}>{ele.CaracteristicaDescripcion}&lt;/span>: {ele.Respuesta}&lt;/p>
                                      &lt;/>
                                    )
                                  })
                                }
                              &lt;/>
                              :
                              &lt;>
                              &lt;/>
                          }
                        &lt;/>
                    }
                  &lt;/div>

                &lt;/div>
                &lt;div style={{ display: "flex", width: "40%", marginRight: "40px" }}>
                  &lt;RightMenu />
                &lt;/div>
              &lt;/div>
            &lt;/NavPageContainer>
          &lt;/>
      }
    &lt;/>
  );


}

export default Asignar</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.10</a> on Fri Mar 18 2022 12:00:41 GMT-0600 (hora est谩ndar central) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>



</body>
</html>
